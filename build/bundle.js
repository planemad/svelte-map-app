var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function i(e){return e&&s(e.destroy)?e.destroy:t}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(){return t=" ",document.createTextNode(t);var t}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let g;function h(t){g=t}function $(){if(!g)throw new Error("Function called outside component initialization");return g}function b(){const t=$();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,s)}))}}}function y(t,e){$().$$.context.set(t,e)}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const x=[],k=[],w=[],z=[],C=Promise.resolve();let j=!1;function T(t){w.push(t)}const _=new Set;let E=0;function S(){const t=g;do{for(;E<x.length;){const t=x[E];E++,h(t),M(t.$$)}for(h(null),x.length=0,E=0;k.length;)k.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];_.has(e)||(_.add(e),e())}w.length=0}while(x.length);for(;z.length;)z.pop()();j=!1,_.clear(),h(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const U=new Set;let R;function Z(t,e){t&&t.i&&(U.delete(t),t.i(e))}function B(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),R.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function L(t){t&&t.c()}function O(t,n,c,r){const{fragment:i,on_mount:a,on_destroy:l,after_update:u}=t.$$;i&&i.m(n,c),r||T((()=>{const n=a.map(e).filter(s);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(T)}function q(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(x.push(t),j||(j=!0,C.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(e,s,c,r,i,a,l,d=[-1]){const p=g;h(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||p.$$.root};l&&l(f.root);let m=!1;if(f.ctx=c?c(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),m&&N(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();s.intro&&Z(e.$$.fragment),O(e,s.target,s.anchor,s.customElement),S()}h(p)}class I{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const H={};const J={};function V(t,e){for(const{type:n,value:o,id:s}of t){if(document.getElementById(s))return void("script"===n&&e());const t=document.createElement(n);t.id=s,"script"===n?(t.async=!0,t.defer=!0,t.src=o,t.onload=()=>e()):(t.rel="stylesheet",t.href=o),document.body.appendChild(t)}}function G(t,e,n,o){const s=[];for(const[c,r]of Object.entries(e)){const e=e=>{const[s,c]=r(t,e,n);o.dispatchEvent(new CustomEvent(s,{detail:c}))};t.on(c,e),s.push([c,e])}return()=>{for(const[e,n]of s)t.off(e,n)}}function P(t,e={}){const n=[{type:"script",attr:"src",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.js`,id:"byk-gl-js"},{type:"link",attr:"href",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.css`,id:"byk-gl-css"}],o=e.customStylesheetUrl;o&&n.push({type:"link",attr:"href",value:o,id:"byk-mcsu-css"});let s=()=>{};return V(n,(()=>{s=function(t,e){window.mapboxgl.accessToken=t.accessToken;return G(new window.mapboxgl.Map(t),Q,window.mapboxgl,e)}({...e,container:t},t)})),{destroy(){s()}}}const Q={dragend:t=>["dragend",{center:t.getCenter()}],drag:t=>["drag",{center:t.getCenter()}],moveend:t=>["recentre",{center:t.getCenter()}],click:(t,{lngLat:e})=>["click",{lng:e.lng,lat:e.lat}],zoomstart:t=>["zoomstart",{zoom:t.getZoom()}],zoom:t=>["zoom",{zoom:t.getZoom()}],zoomend:t=>["zoomend",{zoom:t.getZoom()}],load:(t,e,n)=>["ready",{map:t,mapbox:n}]},Y=[];function F(e,n=t){let o;const s=new Set;function r(t){if(c(e,t)&&(e=t,o)){const t=!Y.length;for(const t of s)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,i=t){const a=[c,i];return s.add(a),1===s.size&&(o=n(r)||t),c(e),()=>{s.delete(a),0===s.size&&(o(),o=null)}}}}class W{constructor(){this.queue=F([]),this.unsubscribe=null,this.started=!1}send(t,e=[]){t&&this.queue.update((n=>[...n,[t,e]]))}start(t){this.unsubscribe=this.queue.subscribe((e=>{for(;e.length;){const[n,o]=e.shift();t[n].apply(t,o)}})),this.started=!0}stop(){this.started&&(this.unsubscribe(),this.queue=F([]),this.started=!1)}}function D(t){let e;const n=t[21].default,o=function(t,e,n,o){if(t){const s=r(t,e,n,o);return t[0](s)}}(n,t,t[20],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,s){o&&o.p&&(!e||1048576&s[0])&&function(t,e,n,o,s,c){if(s){const i=r(e,n,o,c);t.p(i,s)}}(o,n,t,t[20],e?function(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}(n,t[20],s,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[20]),null)},i(t){e||(Z(o,t),e=!0)},o(t){B(o,t),e=!1},d(t){o&&o.d(t)}}}function K(t){let e,n,s,c,r=t[0]&&D(t);return{c(){e=d("div"),r&&r.c(),m(e,"class","svelte-1kuj9kb")},m(o,a){l(o,e,a),r&&r.m(e,null),n=!0,s||(c=[i(P.call(null,e,t[1])),f(e,"ready",t[2]),f(e,"recentre",t[22]),f(e,"dragend",t[23]),f(e,"click",t[24]),f(e,"zoomstart",t[25]),f(e,"zoom",t[26]),f(e,"zoomend",t[27]),f(e,"drag",t[28])],s=!0)},p(t,n){t[0]?r?(r.p(t,n),1&n[0]&&Z(r,1)):(r=D(t),r.c(),Z(r,1),r.m(e,null)):r&&(R={r:0,c:[],p:R},B(r,1,1,(()=>{r=null})),R.r||o(R.c),R=R.p)},i(t){n||(Z(r),n=!0)},o(t){B(r),n=!1},d(t){t&&u(e),r&&r.d(),s=!1,o(c)}}}function X(t,e,n){let{$$slots:o={},$$scope:s}=e,{map:c=null}=e,{version:r="v2.3.1"}=e,{center:i=[0,0]}=e,{zoom:a=9}=e,{zoomRate:l=1}=e,{wheelZoomRate:u=1}=e,{options:d={}}=e,{accessToken:p}=e,{customStylesheetUrl:f=!1}=e,{style:m="mapbox://styles/mapbox/streets-v11"}=e;const g=b();let h;y(J,{getMap:()=>c,getMapbox:()=>h});const x=Object.assign({accessToken:p,container:undefined,style:m,center:i,zoom:a,zoomRate:l,wheelZoomRate:u,version:r,customStylesheetUrl:f,map:c},d),k=new W;var w;function z(t,e={}){k.send("setZoom",[t,e])}return w=()=>{k.stop(),n(0,c=void 0)},$().$$.on_destroy.push(w),t.$$set=t=>{"map"in t&&n(0,c=t.map),"version"in t&&n(3,r=t.version),"center"in t&&n(4,i=t.center),"zoom"in t&&n(5,a=t.zoom),"zoomRate"in t&&n(6,l=t.zoomRate),"wheelZoomRate"in t&&n(7,u=t.wheelZoomRate),"options"in t&&n(8,d=t.options),"accessToken"in t&&n(9,p=t.accessToken),"customStylesheetUrl"in t&&n(10,f=t.customStylesheetUrl),"style"in t&&n(11,m=t.style),"$$scope"in t&&n(20,s=t.$$scope)},t.$$.update=()=>{32&t.$$.dirty[0]&&a&&z(a)},[c,x,function({detail:t}){n(0,c=t.map),h=t.mapbox,k.start(c),g("ready")},r,i,a,l,u,d,p,f,m,function(t,e={}){k.send("fitBounds",[t,e])},function(t,e={}){k.send("flyTo",[t,e])},function(){k.send("resize")},function(t,e={}){k.send("setCenter",[t,e])},z,function(t,e="top-right"){k.send("addControl",[t,e])},function(){return c},function(){return h},s,o,function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)}]}class tt extends I{constructor(t){super(),A(this,t,X,K,c,{map:0,version:3,center:4,zoom:5,zoomRate:6,wheelZoomRate:7,options:8,accessToken:9,customStylesheetUrl:10,style:11,fitBounds:12,flyTo:13,resize:14,setCenter:15,setZoom:16,addControl:17,getMap:18,getMapbox:19},null,[-1,-1])}get fitBounds(){return this.$$.ctx[12]}get flyTo(){return this.$$.ctx[13]}get resize(){return this.$$.ctx[14]}get setCenter(){return this.$$.ctx[15]}get setZoom(){return this.$$.ctx[16]}get addControl(){return this.$$.ctx[17]}get getMap(){return this.$$.ctx[18]}get getMapbox(){return this.$$.ctx[19]}}function et(t,e={}){const n=[{type:"script",value:`//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/${e.version}/mapbox-gl-geocoder.min.js`,id:"byk-gc-js"},{type:"link",value:`//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/${e.version}/mapbox-gl-geocoder.css`,id:"byk-gc-css"}],o=e.customStylesheetUrl;o&&n.push({type:"link",value:o,id:"byk-gcsu-css"});let s=()=>{};return V(n,(()=>{s=function(t,e){const n=new window.MapboxGeocoder(t);n.addTo(`#${e.id}`),t.value&&n.setInput(t.value);return G(n,nt,!1,e)}(e,t)})),{destroy(){s()}}}const nt={results:(t,e)=>["results",e],result:(t,e)=>["result",e],loading:(t,e)=>["loading",e],error:(t,e)=>["error",e],clear:(t,e)=>["clear",e],load:t=>["ready",{geocoder:t}]};function ot(e){let n,s,c;return{c(){n=d("div"),m(n,"id",e[0]),m(n,"class","svelte-1k1b3t4")},m(t,o){l(t,n,o),s||(c=[i(et.call(null,n,e[1])),f(n,"ready",e[2]),f(n,"results",e[11]),f(n,"result",e[12]),f(n,"loading",e[13]),f(n,"error",e[14]),f(n,"clear",e[15]),f(n,"load",e[16])],s=!0)},p:t,i:t,o:t,d(t){t&&u(n),s=!1,o(c)}}}function st(t,e,n){let{accessToken:o}=e,{options:s={}}=e,{version:c="v4.5.1"}=e,{types:r=["country","region","postcode","district","place","locality","neighborhood","address"]}=e,{placeholder:i="Search"}=e,{value:a=null}=e,{customStylesheetUrl:l=!1}=e,{geocoder:u}=e;const d=b(),p="bsm-"+Math.random().toString(36).substring(6),f=Object.assign({version:c,accessToken:o,types:r.join(","),placeholder:i,customStylesheetUrl:l,value:a},s);return t.$$set=t=>{"accessToken"in t&&n(4,o=t.accessToken),"options"in t&&n(5,s=t.options),"version"in t&&n(6,c=t.version),"types"in t&&n(7,r=t.types),"placeholder"in t&&n(8,i=t.placeholder),"value"in t&&n(9,a=t.value),"customStylesheetUrl"in t&&n(10,l=t.customStylesheetUrl),"geocoder"in t&&n(3,u=t.geocoder)},[p,f,function({detail:t}){n(3,u=t.geocoder),d("ready")},u,o,s,c,r,i,a,l,function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)}]}class ct extends I{constructor(t){super(),A(this,t,st,ot,c,{accessToken:4,options:5,version:6,types:7,placeholder:8,value:9,customStylesheetUrl:10,geocoder:3})}}function rt(t){let e,n,o,s,c,r,i,f,g,h,$,b,y,v,x,w,C;function j(e){t[5](e)}let T={accessToken:t[3].map.access_token,types:["country","region","postcode","district","place","locality","neighborhood"],options:{clearOnBlur:!0,collapsed:!0,marker:!0,mapboxgl:t[0]}};void 0!==t[2]&&(T.geocoder=t[2]),h=new ct({props:T}),k.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(h,"geocoder",j))),h.$on("ready",it),h.$on("result",t[4]);return w=new tt({props:{accessToken:"appConfig.amp.accessToken",options:{projection:"naturalEarth"},version:"v2.6.1"}}),t[6](w),w.$on("recentre",t[7]),{c(){e=d("main"),n=d("div"),o=d("div"),s=d("div"),s.innerHTML='<div class="uk-card uk-card-default uk-card-body uk-padding-small"><h3 class="uk-card-title">Svelte Mapbox App</h3> \n\t\t\t\t\t<p>as</p></div>',c=p(),r=d("div"),i=d("div"),f=d("div"),g=p(),L(h.$$.fragment),b=p(),y=d("div"),y.innerHTML='<div class="uk-card uk-card-default uk-card-body">Item</div>',v=p(),x=d("div"),L(w.$$.fragment),m(f,"class","uk-position-relative"),m(i,"class","uk-card uk-card-default uk-card-body"),m(o,"class","uk-width-large uk-grid-small"),m(o,"uk-grid",""),m(n,"id","map-overlay"),m(n,"class","svelte-1kwuosg"),m(x,"id","map"),m(x,"class","svelte-1kwuosg")},m(t,u){l(t,e,u),a(e,n),a(n,o),a(o,s),a(o,c),a(o,r),a(r,i),a(i,f),a(f,g),O(h,f,null),a(o,b),a(o,y),a(e,v),a(e,x),O(w,x,null),C=!0},p(t,[e]){const n={};var o;8&e&&(n.accessToken=t[3].map.access_token),1&e&&(n.options={clearOnBlur:!0,collapsed:!0,marker:!0,mapboxgl:t[0]}),!$&&4&e&&($=!0,n.geocoder=t[2],o=()=>$=!1,z.push(o)),h.$set(n);w.$set({})},i(t){C||(Z(h.$$.fragment,t),Z(w.$$.fragment,t),C=!0)},o(t){B(h.$$.fragment,t),B(w.$$.fragment,t),C=!1},d(n){n&&u(e),q(h),t[6](null),q(w)}}}function it(t){document.getElementsByClassName("mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search")[0].insertAdjacentHTML("afterEnd",'<span uk-icon="icon: world" style="position:absolute;padding:8px"></span>'),document.getElementsByClassName("mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search")[0].remove()}function at(t,e,n){let{mapbox:o,map:s,geocoder:c}=e,{appConfig:r={map:{accessToken:"pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiemdYSVVLRSJ9.g3lbg_eN0kztmsfIPxa9MQ",configUrl:"https://gist.githubusercontent.com/planemad/62be758755320cc052eecb8c8bde01bf/raw/e27b233921435db4e83f8d8a6a8947e8fc37ac49/sample-map-config.js"}}}=e;var i;y(H,{getMap:()=>s,getMapbox:()=>o}),i=()=>{var t;queryOverpass=require("query-overpass"),t=t=>{console.log(t),s.setCenter([t.longitude,t.latitude])},fetch("https://api.freegeoip.app/json/?apikey=8d1b1d00-4db5-11ec-85e0-8dc3d498b907").then((t=>t.json())).then((e=>t(e))),r.map.configUrl&&fetch(r.map.configUrl).then((t=>t.json())).then((t=>{Object.assign(r.map,t)})),window.location.hash||n(3,r.map.autoLocate=!0,r);const e=document.createElement("link");return e.rel="stylesheet",e.href="https://raw.githack.com/bravecow/mapbox-gl-controls/master/theme.css",document.body.appendChild(e),detectUserSettings(),()=>{s.remove(),e.parentNode.removeChild(e)}},$().$$.on_mount.push(i);return t.$$set=t=>{"mapbox"in t&&n(0,o=t.mapbox),"map"in t&&n(1,s=t.map),"geocoder"in t&&n(2,c=t.geocoder),"appConfig"in t&&n(3,r=t.appConfig)},[o,s,c,r,function(t){s.fitBounds(t.detail.result.bbox),setLocationContext({lng:t.detail.result.center[0],lat:t.detail.result.center[1]})},function(t){c=t,n(2,c)},function(t){k[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},t=>console.log(t.detail.center.lat,t.detail.center.lng)]}return new class extends I{constructor(t){super(),A(this,t,at,rt,c,{mapbox:0,map:1,geocoder:2,appConfig:3})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
