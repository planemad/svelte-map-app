var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function i(e){return e&&s(e.destroy)?e.destroy:t}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(){return t=" ",document.createTextNode(t);var t}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let g;function h(t){g=t}function $(){if(!g)throw new Error("Function called outside component initialization");return g}function b(){const t=$();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,s)}))}}}function y(t,e){$().$$.context.set(t,e)}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const k=[],x=[],w=[],z=[],T=Promise.resolve();let j=!1;function C(t){w.push(t)}const _=new Set;let E=0;function S(){const t=g;do{for(;E<k.length;){const t=k[E];E++,h(t),M(t.$$)}for(h(null),k.length=0,E=0;x.length;)x.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];_.has(e)||(_.add(e),e())}w.length=0}while(k.length);for(;z.length;)z.pop()();j=!1,_.clear(),h(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const U=new Set;let Z;function O(t,e){t&&t.i&&(U.delete(t),t.i(e))}function R(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),Z.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function B(t){t&&t.c()}function L(t,n,c,r){const{fragment:i,on_mount:l,on_destroy:a,after_update:u}=t.$$;i&&i.m(n,c),r||C((()=>{const n=l.map(e).filter(s);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(C)}function N(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(k.push(t),j||(j=!0,T.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(e,s,c,r,i,l,a,d=[-1]){const p=g;h(e);const f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||p.$$.root};a&&a(f.root);let m=!1;if(f.ctx=c?c(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),m&&q(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();s.intro&&O(e.$$.fragment),L(e,s.target,s.anchor,s.customElement),S()}h(p)}class I{$destroy(){N(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J={};const W={};function G(t,e){for(const{type:n,value:o,id:s}of t){if(document.getElementById(s))return void("script"===n&&e());const t=document.createElement(n);t.id=s,"script"===n?(t.async=!0,t.defer=!0,t.src=o,t.onload=()=>e()):(t.rel="stylesheet",t.href=o),document.body.appendChild(t)}}function V(t,e,n,o){const s=[];for(const[c,r]of Object.entries(e)){const e=e=>{const[s,c]=r(t,e,n);o.dispatchEvent(new CustomEvent(s,{detail:c}))};t.on(c,e),s.push([c,e])}return()=>{for(const[e,n]of s)t.off(e,n)}}function D(t,e={}){const n=[{type:"script",attr:"src",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.js`,id:"byk-gl-js"},{type:"link",attr:"href",value:`//api.mapbox.com/mapbox-gl-js/${e.version}/mapbox-gl.css`,id:"byk-gl-css"}],o=e.customStylesheetUrl;o&&n.push({type:"link",attr:"href",value:o,id:"byk-mcsu-css"});let s=()=>{};return G(n,(()=>{s=function(t,e){window.mapboxgl.accessToken=t.accessToken;return V(new window.mapboxgl.Map(t),Q,window.mapboxgl,e)}({...e,container:t},t)})),{destroy(){s()}}}const Q={dragend:t=>["dragend",{center:t.getCenter()}],drag:t=>["drag",{center:t.getCenter()}],moveend:t=>["recentre",{center:t.getCenter()}],click:(t,{lngLat:e})=>["click",{lng:e.lng,lat:e.lat}],zoomstart:t=>["zoomstart",{zoom:t.getZoom()}],zoom:t=>["zoom",{zoom:t.getZoom()}],zoomend:t=>["zoomend",{zoom:t.getZoom()}],load:(t,e,n)=>["ready",{map:t,mapbox:n}]},Y=[];function F(e,n=t){let o;const s=new Set;function r(t){if(c(e,t)&&(e=t,o)){const t=!Y.length;for(const t of s)t[1](),Y.push(t,e);if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(c,i=t){const l=[c,i];return s.add(l),1===s.size&&(o=n(r)||t),c(e),()=>{s.delete(l),0===s.size&&(o(),o=null)}}}}class H{constructor(){this.queue=F([]),this.unsubscribe=null,this.started=!1}send(t,e=[]){t&&this.queue.update((n=>[...n,[t,e]]))}start(t){this.unsubscribe=this.queue.subscribe((e=>{for(;e.length;){const[n,o]=e.shift();t[n].apply(t,o)}})),this.started=!0}stop(){this.started&&(this.unsubscribe(),this.queue=F([]),this.started=!1)}}function P(t){let e;const n=t[21].default,o=function(t,e,n,o){if(t){const s=r(t,e,n,o);return t[0](s)}}(n,t,t[20],null);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,s){o&&o.p&&(!e||1048576&s[0])&&function(t,e,n,o,s,c){if(s){const i=r(e,n,o,c);t.p(i,s)}}(o,n,t,t[20],e?function(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}(n,t[20],s,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[20]),null)},i(t){e||(O(o,t),e=!0)},o(t){R(o,t),e=!1},d(t){o&&o.d(t)}}}function X(t){let e,n,s,c,r=t[0]&&P(t);return{c(){e=d("div"),r&&r.c(),m(e,"class","svelte-1kuj9kb")},m(o,l){a(o,e,l),r&&r.m(e,null),n=!0,s||(c=[i(D.call(null,e,t[1])),f(e,"ready",t[2]),f(e,"recentre",t[22]),f(e,"dragend",t[23]),f(e,"click",t[24]),f(e,"zoomstart",t[25]),f(e,"zoom",t[26]),f(e,"zoomend",t[27]),f(e,"drag",t[28])],s=!0)},p(t,n){t[0]?r?(r.p(t,n),1&n[0]&&O(r,1)):(r=P(t),r.c(),O(r,1),r.m(e,null)):r&&(Z={r:0,c:[],p:Z},R(r,1,1,(()=>{r=null})),Z.r||o(Z.c),Z=Z.p)},i(t){n||(O(r),n=!0)},o(t){R(r),n=!1},d(t){t&&u(e),r&&r.d(),s=!1,o(c)}}}function K(t,e,n){let{$$slots:o={},$$scope:s}=e,{map:c=null}=e,{version:r="v2.3.1"}=e,{center:i=[0,0]}=e,{zoom:l=9}=e,{zoomRate:a=1}=e,{wheelZoomRate:u=1}=e,{options:d={}}=e,{accessToken:p}=e,{customStylesheetUrl:f=!1}=e,{style:m="mapbox://styles/mapbox/streets-v11"}=e;const g=b();let h;y(W,{getMap:()=>c,getMapbox:()=>h});const k=Object.assign({accessToken:p,container:undefined,style:m,center:i,zoom:l,zoomRate:a,wheelZoomRate:u,version:r,customStylesheetUrl:f,map:c},d),x=new H;var w;function z(t,e={}){x.send("setZoom",[t,e])}return w=()=>{x.stop(),n(0,c=void 0)},$().$$.on_destroy.push(w),t.$$set=t=>{"map"in t&&n(0,c=t.map),"version"in t&&n(3,r=t.version),"center"in t&&n(4,i=t.center),"zoom"in t&&n(5,l=t.zoom),"zoomRate"in t&&n(6,a=t.zoomRate),"wheelZoomRate"in t&&n(7,u=t.wheelZoomRate),"options"in t&&n(8,d=t.options),"accessToken"in t&&n(9,p=t.accessToken),"customStylesheetUrl"in t&&n(10,f=t.customStylesheetUrl),"style"in t&&n(11,m=t.style),"$$scope"in t&&n(20,s=t.$$scope)},t.$$.update=()=>{32&t.$$.dirty[0]&&l&&z(l)},[c,k,function({detail:t}){n(0,c=t.map),h=t.mapbox,x.start(c),g("ready")},r,i,l,a,u,d,p,f,m,function(t,e={}){x.send("fitBounds",[t,e])},function(t,e={}){x.send("flyTo",[t,e])},function(){x.send("resize")},function(t,e={}){x.send("setCenter",[t,e])},z,function(t,e="top-right"){x.send("addControl",[t,e])},function(){return c},function(){return h},s,o,function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)}]}class tt extends I{constructor(t){super(),A(this,t,K,X,c,{map:0,version:3,center:4,zoom:5,zoomRate:6,wheelZoomRate:7,options:8,accessToken:9,customStylesheetUrl:10,style:11,fitBounds:12,flyTo:13,resize:14,setCenter:15,setZoom:16,addControl:17,getMap:18,getMapbox:19},null,[-1,-1])}get fitBounds(){return this.$$.ctx[12]}get flyTo(){return this.$$.ctx[13]}get resize(){return this.$$.ctx[14]}get setCenter(){return this.$$.ctx[15]}get setZoom(){return this.$$.ctx[16]}get addControl(){return this.$$.ctx[17]}get getMap(){return this.$$.ctx[18]}get getMapbox(){return this.$$.ctx[19]}}function et(t,e={}){const n=[{type:"script",value:`//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/${e.version}/mapbox-gl-geocoder.min.js`,id:"byk-gc-js"},{type:"link",value:`//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/${e.version}/mapbox-gl-geocoder.css`,id:"byk-gc-css"}],o=e.customStylesheetUrl;o&&n.push({type:"link",value:o,id:"byk-gcsu-css"});let s=()=>{};return G(n,(()=>{s=function(t,e){const n=new window.MapboxGeocoder(t);n.addTo(`#${e.id}`),t.value&&n.setInput(t.value);return V(n,nt,!1,e)}(e,t)})),{destroy(){s()}}}const nt={results:(t,e)=>["results",e],result:(t,e)=>["result",e],loading:(t,e)=>["loading",e],error:(t,e)=>["error",e],clear:(t,e)=>["clear",e],load:t=>["ready",{geocoder:t}]};function ot(e){let n,s,c;return{c(){n=d("div"),m(n,"id",e[0]),m(n,"class","svelte-1k1b3t4")},m(t,o){a(t,n,o),s||(c=[i(et.call(null,n,e[1])),f(n,"ready",e[2]),f(n,"results",e[11]),f(n,"result",e[12]),f(n,"loading",e[13]),f(n,"error",e[14]),f(n,"clear",e[15]),f(n,"load",e[16])],s=!0)},p:t,i:t,o:t,d(t){t&&u(n),s=!1,o(c)}}}function st(t,e,n){let{accessToken:o}=e,{options:s={}}=e,{version:c="v4.5.1"}=e,{types:r=["country","region","postcode","district","place","locality","neighborhood","address"]}=e,{placeholder:i="Search"}=e,{value:l=null}=e,{customStylesheetUrl:a=!1}=e,{geocoder:u}=e;const d=b(),p="bsm-"+Math.random().toString(36).substring(6),f=Object.assign({version:c,accessToken:o,types:r.join(","),placeholder:i,customStylesheetUrl:a,value:l},s);return t.$$set=t=>{"accessToken"in t&&n(4,o=t.accessToken),"options"in t&&n(5,s=t.options),"version"in t&&n(6,c=t.version),"types"in t&&n(7,r=t.types),"placeholder"in t&&n(8,i=t.placeholder),"value"in t&&n(9,l=t.value),"customStylesheetUrl"in t&&n(10,a=t.customStylesheetUrl),"geocoder"in t&&n(3,u=t.geocoder)},[p,f,function({detail:t}){n(3,u=t.geocoder),d("ready")},u,o,s,c,r,i,l,a,function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)},function(e){v.call(this,t,e)}]}class ct extends I{constructor(t){super(),A(this,t,st,ot,c,{accessToken:4,options:5,version:6,types:7,placeholder:8,value:9,customStylesheetUrl:10,geocoder:3})}}function rt(t){let e,n,o,s,c,r,i,f,g,h,$,b,y,v,k,w,T,j,C;function _(e){t[5](e)}let E={accessToken:t[3].map.accessToken,types:["country","region","postcode","district","place","locality","neighborhood"],options:{clearOnBlur:!0,collapsed:!0,marker:!0,mapboxgl:t[0]}};void 0!==t[2]&&(E.geocoder=t[2]),b=new ct({props:E}),x.push((()=>function(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}(b,"geocoder",_))),b.$on("result",t[4]);let S={accessToken:t[3].map.accessToken,options:{projection:"naturalEarth"},style:"mapbox://styles/planemad/ckd42fwa20n531iqrewerwla1",version:"v2.6.1"};return j=new tt({props:S}),t[6](j),j.$on("recentre",t[7]),{c(){e=d("main"),n=d("div"),o=d("div"),s=d("div"),c=d("div"),r=d("h3"),r.textContent="World Water Map",i=p(),f=d("p"),f.textContent="as",g=p(),h=d("div"),$=p(),B(b.$$.fragment),v=p(),k=d("div"),k.innerHTML='<div class="uk-card uk-card-default uk-card-body">Item</div>',w=p(),T=d("div"),B(j.$$.fragment),m(r,"class","uk-card-title"),m(h,"class","uk-position-relative"),m(c,"class","uk-card uk-card-default uk-card-body uk-padding-small"),m(o,"class","uk-width-large uk-grid-small"),m(o,"uk-grid",""),m(n,"id","map-overlay"),m(n,"class","svelte-1kwuosg"),m(T,"id","map"),m(T,"class","svelte-1kwuosg")},m(t,u){a(t,e,u),l(e,n),l(n,o),l(o,s),l(s,c),l(c,r),l(c,i),l(c,f),l(c,g),l(c,h),l(h,$),L(b,h,null),l(o,v),l(o,k),l(e,w),l(e,T),L(j,T,null),C=!0},p(t,[e]){const n={};var o;8&e&&(n.accessToken=t[3].map.accessToken),1&e&&(n.options={clearOnBlur:!0,collapsed:!0,marker:!0,mapboxgl:t[0]}),!y&&4&e&&(y=!0,n.geocoder=t[2],o=()=>y=!1,z.push(o)),b.$set(n);const s={};8&e&&(s.accessToken=t[3].map.accessToken),j.$set(s)},i(t){C||(O(b.$$.fragment,t),O(j.$$.fragment,t),C=!0)},o(t){R(b.$$.fragment,t),R(j.$$.fragment,t),C=!1},d(n){n&&u(e),N(b),t[6](null),N(j)}}}function it(t,e,n){let{mapbox:o,map:s,geocoder:c}=e,{appConfig:r={map:{accessToken:"pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2l3ZmNjNXVzMDAzZzJ0cDV6b2lkOG9odSJ9.eep6sUoBS0eMN4thZUWpyQ",configUrl:"https://gist.githubusercontent.com/planemad/62be758755320cc052eecb8c8bde01bf/raw/9b6bcf880b83397167931975eed42fdb4762b85b/sample-map-config.js"}}}=e;var i;y(J,{getMap:()=>s,getMapbox:()=>o}),i=()=>{var t;t=t=>{console.log(t),s.setCenter([t.longitude,t.latitude])},fetch("https://api.freegeoip.app/json/?apikey=8d1b1d00-4db5-11ec-85e0-8dc3d498b907").then((t=>t.json())).then((e=>t(e))),r.map.configUrl&&fetch(r.map.configUrl).then((t=>t.json())).then((t=>{Object.assign(r.map,t)})),window.location.hash||n(3,r.map.autoLocate=!0,r);const e=document.createElement("link");return e.rel="stylesheet",e.href="https://raw.githack.com/korywka/mapbox-gl-controls/master/docs/controls.css",document.body.appendChild(e),()=>{s.remove(),e.parentNode.removeChild(e)}},$().$$.on_mount.push(i);return t.$$set=t=>{"mapbox"in t&&n(0,o=t.mapbox),"map"in t&&n(1,s=t.map),"geocoder"in t&&n(2,c=t.geocoder),"appConfig"in t&&n(3,r=t.appConfig)},[o,s,c,r,function(t){s.fitBounds(t.detail.result.bbox),setLocationContext({lng:t.detail.result.center[0],lat:t.detail.result.center[1]})},function(t){c=t,n(2,c)},function(t){x[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},t=>console.log(t.detail.center.lat,t.detail.center.lng)]}return new class extends I{constructor(t){super(),A(this,t,it,rt,c,{mapbox:0,map:1,geocoder:2,appConfig:3})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
